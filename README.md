# Supertest Cookie Case-Sensitivity Bug Reproducer

For issue:
- https://github.com/forwardemail/supertest/issues/879

Note: this reproducer project was mostly generated by Claude, with some adjustments (fix the library versions, simplify the test).
## Bug Description

Supertest's cookie parser incorrectly lowercases cookie names, which causes issues when testing applications that use mixed-case cookie names.

### Expected Behavior
When a server sets a cookie named `Foo`, the cookie name should remain `Foo` (case-preserved).

### Actual Behavior
Supertest lowercases the cookie name to `foo`, making it impossible to test cookies with mixed-case names.

## Root Cause

The bug might be in `lib/cookies/assertion.js` at this line:

```javascript
const key = part.substr(0, equalsIndex).trim().toLowerCase();
```

Cookie names should be treated as case-sensitive according to [RFC 6265](https://datatracker.ietf.org/doc/html/rfc6265#section-5.2), and the parser should preserve the original case.

## Reproduction Steps

1. Install dependencies:
   ```bash
   npm install
   ```

2. Run the test:
   ```bash
   npm test
   ```

3. Observe that the cookie header contains `Foo=bar` but supertest's parser converts it to `foo`.

## Example Code

```javascript
const res = await request(app)
  .get('/v1/myroute/')
  .set('Accept', 'application/json')
  .expect(200)
  .expect(cookies.new({name: 'Foo', value: 'bar'})); // This fails
```

The test fails because `res.cookies` has a cookie called `foo`, not `Foo`.

## Environment

- Node.js: 20
- supertest: ^7.2.2
- express: ^5.2.1

## Impact

This bug prevents proper testing of applications that rely on case-sensitive cookie names, which is a valid use case according to HTTP cookie specifications.
